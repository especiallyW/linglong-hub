--- ../src/AniLibria.pro	2023-12-01 19:22:48.055756000 +0800
+++ ../src/AniLibria.pro	2023-12-01 19:57:04.402404934 +0800
@@ -127,7 +127,19 @@
 
 unix {
 #Setup desktop entry file. https://specifications.freedesktop.org/desktop-entry-spec/latest
-    desktop.files += ../data/anilibria.desktop
+    # desktop指定
+    DESKTOP_FILE = ./AniLibria.desktop
+    system("echo '[Desktop Entry]' > $$DESKTOP_FILE")
+    system("echo 'Version=1.2.12' >> $$DESKTOP_FILE")
+    system("echo 'Type=Application' >> $$DESKTOP_FILE")
+    system("echo 'Name=AniLibria' >> $$DESKTOP_FILE")
+    system("echo 'Comment=AniLibria.' >> $$DESKTOP_FILE")
+    system("echo 'Exec=AniLibria' >> $$DESKTOP_FILE")
+    system("echo 'Icon=icon_16x16.png' >> $$DESKTOP_FILE")
+    system("echo 'Terminal=false' >> $$DESKTOP_FILE")
+    system("echo 'Categories=Utility;' >> $$DESKTOP_FILE")
+
+    desktop.files += $$DESKTOP_FILE
     desktop.path = $$PREFIX/share/applications
 
 #Setup icons for following resolutions: 16x16; 32x32; 128x128; 256x256 and 512x512.
@@ -135,33 +147,33 @@
 
 #16x16
     icon_16.path = $$PREFIX/share/icons/hicolor/16x16/apps
-    icon_16.commands = mkdir -p icons/16 && cp ../anilibria.iconset/icon_16x16.png icons/16/anilibria.png
-    icon_16.files += icons/16/anilibria.png
+#    icon_16.commands = mkdir -p icons/16 && cp ../anilibria.iconset/icon_16x16.png icons/16/anilibria.png
+    icon_16.files += ../anilibria.iconset/icon_16x16.png
     icon_16.CONFIG += no_check_exist
 #32x32
     icon_32.path = $$PREFIX/share/icons/hicolor/32x32/apps
-    icon_32.commands = mkdir -p icons/32 && cp ../anilibria.iconset/icon_32x32.png icons/32/anilibria.png
-    icon_32.files += icons/32/anilibria.png
+#    icon_32.commands = mkdir -p icons/32 && cp ../anilibria.iconset/icon_32x32.png icons/32/anilibria.png
+    icon_32.files += ../anilibria.iconset/icon_32x32.png
     icon_32.CONFIG += no_check_exist
 #48x48 #TODO: create png icon in 48x48 resolution.
     icon_48.path = $$PREFIX/share/icons/hicolor/48x48/apps
-    icon_48.commands = mkdir -p icons/48 && cp icon48.png icons/48/anilibria.png
-    icon_48.files += icons/48/anilibria.png
+#    icon_48.commands = mkdir -p icons/48 && cp $$PWD/icon48.png icons/48/anilibria.png
+    icon_48.files += $$PWD/icon48.png
     icon_48.CONFIG += no_check_exist
 #128x128
     icon_128.path = $$PREFIX/share/icons/hicolor/128x128/apps
-    icon_128.commands = mkdir -p icons/128 && cp ../anilibria.iconset/icon_128x128.png icons/128/anilibria.png
-    icon_128.files += icons/128/anilibria.png
+#    icon_128.commands = mkdir -p icons/128 && cp ../anilibria.iconset/icon_128x128.png icons/128/anilibria.png
+    icon_128.files += ../anilibria.iconset/icon_128x128.png
     icon_128.CONFIG += no_check_exist
 #256x256
     icon_256.path = $$PREFIX/share/icons/hicolor/256x256/apps
-    icon_256.commands = mkdir -p icons/256 && cp ../anilibria.iconset/icon_256x256.png icons/256/anilibria.png
-    icon_256.files += icons/256/anilibria.png
+#    icon_256.commands = mkdir -p icons/256 && cp ../anilibria.iconset/icon_256x256.png icons/256/anilibria.png
+    icon_256.files += ../anilibria.iconset/icon_256x256.png
     icon_256.CONFIG += no_check_exist
 #512x512
     icon_512.path = $$PREFIX/share/icons/hicolor/512x512/apps
-    icon_512.commands = mkdir -p icons/512 && cp ../anilibria.iconset/icon_512x512.png icons/512/anilibria.png
-    icon_512.files += icons/512/anilibria.png
+#    icon_512.commands = mkdir -p icons/512 && cp ../anilibria.iconset/icon_512x512.png icons/512/anilibria.png
+    icon_512.files += ../anilibria.iconset/icon_512x512.png
     icon_512.CONFIG += no_check_exist
 
     UNIX_ICONS += icon_16 icon_32 icon_48 icon_128 icon_256 icon_512
@@ -276,7 +288,7 @@
 # Default rules for deployment.
 !flatpak{
     qnx: target.path = /tmp/$${TARGET}/bin
-    else: unix:!android: target.path = /opt/$${TARGET}/bin
+    else: unix:!android: target.path = $$PREFIX/bin
 }else{
     target.path = $$PREFIX/bin
 }
